/* Comprehensive Responsive Overrides for MLB Sun Tracker */
/* This file ensures consistent responsive behavior across all components */

/* ========================================
   Root Variables with Fluid Units
   ======================================== */
:root {
  /* Fluid spacing using clamp() */
  --spacing-xs: clamp(0.25rem, 1vw, 0.375rem);
  --spacing-sm: clamp(0.5rem, 1.5vw, 0.75rem);
  --spacing-md: clamp(1rem, 2vw, 1.25rem);
  --spacing-lg: clamp(1.5rem, 3vw, 2rem);
  --spacing-xl: clamp(2rem, 4vw, 3rem);
  --spacing-2xl: clamp(3rem, 5vw, 4rem);
  
  /* Fluid typography */
  --font-xs: clamp(0.625rem, 2vw, 0.75rem);
  --font-sm: clamp(0.75rem, 2.5vw, 0.875rem);
  --font-base: clamp(0.875rem, 3vw, 1rem);
  --font-lg: clamp(1rem, 3.5vw, 1.125rem);
  --font-xl: clamp(1.125rem, 4vw, 1.25rem);
  --font-2xl: clamp(1.25rem, 5vw, 1.5rem);
  --font-3xl: clamp(1.5rem, 6vw, 2rem);
  --font-4xl: clamp(1.75rem, 7vw, 2.5rem);
  
  /* Touch targets */
  --touch-min: 2.75rem; /* 44px minimum */
  --touch-comfortable: 3rem; /* 48px comfortable */
  --touch-large: 3.5rem; /* 56px large */
}

/* ========================================
   Global Responsive Reset
   ======================================== */
* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

html {
  font-size: 100%; /* 16px base - prevents iOS zoom */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  scroll-behavior: smooth;
  overflow-x: hidden;
}

body {
  font-size: var(--font-base);
  line-height: 1.5;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========================================
   Responsive Typography
   ======================================== */
h1 { font-size: var(--font-4xl); }
h2 { font-size: var(--font-3xl); }
h3 { font-size: var(--font-2xl); }
h4 { font-size: var(--font-xl); }
h5 { font-size: var(--font-lg); }
h6 { font-size: var(--font-base); }

p {
  font-size: var(--font-base);
  line-height: 1.6;
}

/* ========================================
   Touch-Friendly Controls
   ======================================== */
button,
.btn,
[role="button"],
a.button {
  min-height: var(--touch-min);
  min-width: var(--touch-min);
  padding: var(--spacing-sm) var(--spacing-md);
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
  cursor: pointer;
}

input[type="text"],
input[type="email"],
input[type="password"],
input[type="tel"],
input[type="number"],
input[type="date"],
input[type="time"],
textarea,
select {
  min-height: var(--touch-min);
  padding: var(--spacing-sm) var(--spacing-md);
  font-size: 1rem; /* Prevents zoom on iOS */
  border-radius: 0.5rem;
  touch-action: manipulation;
  width: 100%;
}

/* Enhanced select styling for mobile */
select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3e%3cpath fill='%23495057' d='M6 9L1 4h10z'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right var(--spacing-md) center;
  padding-right: calc(var(--spacing-md) * 2.5);
}

/* ========================================
   Responsive Grid and Flexbox
   ======================================== */
.container {
  width: 100%;
  max-width: min(75rem, 100%);
  margin: 0 auto;
  padding: 0 var(--spacing-md);
}

.grid {
  display: grid;
  gap: var(--spacing-md);
}

.flex {
  display: flex;
  gap: var(--spacing-md);
}

/* ========================================
   Mobile-First Media Queries
   ======================================== */

/* Extra Small Devices (phones, less than 480px) */
@media screen and (max-width: 479px) {
  :root {
    --font-base: 0.875rem;
    --spacing-md: 0.75rem;
  }
  
  .container {
    padding: 0 var(--spacing-sm);
  }
  
  /* Stack all grids on very small screens */
  .grid,
  [class*="grid-cols-"] {
    grid-template-columns: 1fr !important;
  }
  
  /* Stack flex items */
  .flex-row {
    flex-direction: column;
  }
  
  /* Reduce padding on cards and sections */
  .card,
  section,
  .panel {
    padding: var(--spacing-md);
  }
  
  /* Full-width buttons on mobile */
  button,
  .btn,
  [role="button"] {
    width: 100%;
    justify-content: center;
  }
}

/* Small Devices (phones, 480px to 767px) */
@media screen and (min-width: 480px) and (max-width: 767px) {
  .grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Mobile (up to 768px) */
@media screen and (max-width: 768px) {
  /* Ensure single column layouts */
  .sections-grid,
  .resources-grid,
  .safety-grid,
  .tips-container,
  .weather-grid,
  .parking-lots {
    grid-template-columns: 1fr !important;
  }
  
  /* Stack navigation */
  nav ul {
    flex-direction: column;
    width: 100%;
  }
  
  nav li {
    width: 100%;
  }
  
  /* Mobile tables */
  table {
    font-size: var(--font-sm);
  }
  
  /* Responsive images */
  img {
    max-width: 100%;
    height: auto;
  }
  
  /* Hide desktop-only elements */
  .desktop-only,
  .tablet-only {
    display: none !important;
  }
  
  /* Show mobile-only elements */
  .mobile-only {
    display: block !important;
  }
  
  /* Reduce margins and paddings */
  section {
    margin-bottom: var(--spacing-lg);
  }
  
  /* Touch-friendly spacing between interactive elements */
  button + button,
  .btn + .btn,
  a + a {
    margin-left: 0;
    margin-top: var(--spacing-sm);
  }
  
  /* Improve readability */
  p,
  li {
    font-size: var(--font-base);
    line-height: 1.6;
  }
  
  /* Modal and overlay adjustments */
  .modal,
  .overlay {
    padding: var(--spacing-md);
  }
  
  .modal-content {
    width: calc(100% - var(--spacing-lg));
    max-width: 100%;
    margin: var(--spacing-md);
  }
}

/* Tablets (768px to 1023px) */
@media screen and (min-width: 768px) and (max-width: 1023px) {
  .container {
    padding: 0 var(--spacing-lg);
  }
  
  .grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .grid-cols-3 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  /* Hide mobile-only elements */
  .mobile-only {
    display: none !important;
  }
  
  /* Show tablet-only elements */
  .tablet-only {
    display: block !important;
  }
}

/* Desktop (1024px and up) */
@media screen and (min-width: 1024px) {
  .container {
    padding: 0 var(--spacing-xl);
  }
  
  .grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .grid-cols-4 {
    grid-template-columns: repeat(4, 1fr);
  }
  
  /* Hide mobile and tablet only elements */
  .mobile-only,
  .tablet-only {
    display: none !important;
  }
  
  /* Show desktop-only elements */
  .desktop-only {
    display: block !important;
  }
}

/* Large Desktop (1440px and up) */
@media screen and (min-width: 1440px) {
  .container {
    max-width: 90rem;
  }
}

/* ========================================
   Accessibility Improvements
   ======================================== */

/* High contrast mode support */
@media (prefers-contrast: high) {
  * {
    border-width: 2px !important;
  }
  
  button,
  .btn,
  input,
  select,
  textarea {
    border: 2px solid currentColor !important;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  :root {
    --color-background: #121212;
    --color-surface: #1e1e1e;
    --color-text: #e0e0e0;
    --color-text-secondary: #b0b0b0;
    --color-border: #333333;
  }
}

/* ========================================
   Print Styles
   ======================================== */
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  a,
  a:visited {
    text-decoration: underline;
  }
  
  a[href]:after {
    content: " (" attr(href) ")";
  }
  
  img {
    max-width: 100% !important;
  }
  
  @page {
    margin: 0.5in;
  }
}

/* ========================================
   Utility Classes
   ======================================== */
.text-responsive {
  font-size: var(--font-base);
}

.padding-responsive {
  padding: var(--spacing-md);
}

.margin-responsive {
  margin: var(--spacing-md);
}

.gap-responsive {
  gap: var(--spacing-md);
}

/* Ensure proper stacking context */
.z-base { z-index: 1; }
.z-dropdown { z-index: 100; }
.z-sticky { z-index: 200; }
.z-fixed { z-index: 300; }
.z-modal { z-index: 400; }
.z-tooltip { z-index: 500; }

/* Viewport units with fallbacks */
.vh-100 {
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height */
}

.vw-100 {
  width: 100vw;
  width: 100dvw; /* Dynamic viewport width */
}

/* Safe area support for PWAs */
.safe-area-padding {
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}
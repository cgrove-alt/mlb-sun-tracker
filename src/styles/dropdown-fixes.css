/* Global Dropdown Fixes - Ensures dropdowns are visible and not cut off */

/* Fix for all select elements */
select {
  position: relative;
  z-index: 10;
  background-color: white;
  background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23131313%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
  background-repeat: no-repeat;
  background-position: right 0.7rem top 50%;
  background-size: 0.65rem auto;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

/* Fix for select dropdowns on mobile */
@media (max-width: 768px) {
  select {
    font-size: 16px; /* Prevents zoom on iOS */
    min-height: 44px; /* Touch-friendly size */
    padding-right: 2rem; /* Space for arrow */
  }
  
  /* Ensure select options are visible */
  select:focus {
    outline: 2px solid var(--color-primary, #1976d2);
    outline-offset: 2px;
  }
}

/* Fix for containers that might clip dropdowns */
.mobile-card,
.weather-selector,
.simulator-controls,
.control-group,
.filter-section,
.mobile-filter-section,
.mobile-filter-body {
  overflow: visible !important;
  position: relative;
  z-index: auto;
}

/* Fix for any parent containers with overflow hidden */
@media (max-width: 768px) {
  /* Allow dropdowns to extend outside their containers */
  .mobile-stadium-guide,
  .unified-venue-guide,
  .mobile-content,
  .mobile-section {
    overflow: visible !important;
  }
  
  /* But keep horizontal overflow hidden */
  .mobile-app,
  body {
    overflow-x: hidden !important;
    overflow-y: auto !important;
  }
}

/* Special handling for dropdowns in modals/sheets */
.mobile-filter-sheet select,
.mobile-stadium-selector select,
.modal-content select {
  position: relative;
  z-index: 100;
}

/* Fix for iOS select dropdown issues */
@supports (-webkit-touch-callout: none) {
  select {
    -webkit-appearance: none;
    border-radius: 0;
    background-color: white;
  }
  
  /* iOS-specific dropdown styling */
  select:focus {
    font-size: 16px; /* Prevent zoom */
  }
}

/* Ensure dropdowns in fixed/absolute positioned elements work */
.mobile-filter-content select,
.mobile-menu select,
.profile-menu-dropdown select {
  position: relative;
  z-index: 10001; /* Higher than parent */
}

/* Fix for dropdown menus (custom dropdowns) */
.dropdown-menu,
.profile-menu-dropdown,
.league-nav-dropdown,
.toc-dropdown {
  position: absolute;
  z-index: 10000;
  background: white;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  max-height: 50vh; /* Limit height */
  overflow-y: auto; /* Allow scrolling if needed */
  -webkit-overflow-scrolling: touch;
}

/* Ensure custom dropdowns aren't cut off */
@media (max-width: 768px) {
  .dropdown-menu,
  .profile-menu-dropdown,
  .league-nav-dropdown {
    max-height: 40vh; /* Smaller on mobile */
    width: calc(100vw - 2rem); /* Full width minus padding */
    max-width: 300px;
  }
}

/* Fix for language selector dropdown */
.language-selector-dropdown select {
  min-width: 120px;
  padding: 0.5rem 2rem 0.5rem 0.75rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  background-color: white;
  cursor: pointer;
}

/* Dark mode support for dropdowns */
@media (prefers-color-scheme: dark) {
  select {
    background-color: #2a2a2a;
    color: #e0e0e0;
    border-color: #444;
    background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23e0e0e0%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
  }
  
  .dropdown-menu,
  .profile-menu-dropdown,
  .league-nav-dropdown {
    background: #2a2a2a;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  }
}